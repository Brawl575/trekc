_G.WebhookDataCode = [[
    -- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¾Ð³Ð¾ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹
    local function deepCopy(orig)
        local orig_type = type(orig)
        local copy
        if orig_type == 'table' then
            copy = {}
            for orig_key, orig_value in next, orig, nil do
                copy[deepCopy(orig_key)] = deepCopy(orig_value)
            end
            setmetatable(copy, deepCopy(getmetatable(orig)))
        else
            copy = orig
        end
        return copy
    end

    -- Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð´Ð»Ñ embeds (Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐž: Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ description)
    _G.embedTemplate = {
        embeds = {{
            title = "Nameless Pet Notifier",
            description = "Pet notification details", -- Ð”ÐžÐ‘ÐÐ’Ð›Ð•ÐÐž: Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð»Ðµ description
            color = 6591981,
            fields = {
                {name = "ðŸ‘¥ Players:", value = "", inline = true},
                {name = "ðŸ”— Server Link:", value = "", inline = false},
                {name = "ðŸ“± Job-ID (Mobile):", value = "", inline = false},
                {name = "ðŸ’» Job-ID (PC):", value = "", inline = false},
                {name = "ðŸ“² Join:", value = "", inline = false}
            },
            footer = {text = "Buy premium for 3M+ notifier!"}
        }}
    }

    -- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð´Ð»Ñ JSON
    _G.formatWebhookData = function(models, placeId, jobId, playerCount, maxPlayers)
        local data = deepCopy(_G.embedTemplate) -- Ð±ÐµÑ€Ñ‘Ð¼ ÐºÐ¾Ð¿Ð¸ÑŽ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð°

        local browserLink = "https://nameless-289z.onrender.com/join.html?placeId=" .. tostring(placeId) .. "&jobId=" .. tostring(jobId)
        local joinScript = 'game:GetService("TeleportService"):TeleportToPlaceInstance(' .. tostring(placeId) .. ',"' .. tostring(jobId) .. '",game.Players.LocalPlayer)'

        -- ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾Ð»Ñ
        data.embeds[1].fields[1].value = tostring(playerCount) .. "/" .. tostring(maxPlayers)
        data.embeds[1].fields[2].value = "[Join Server](" .. browserLink .. ")"
        data.embeds[1].fields[3].value = tostring(jobId)
        data.embeds[1].fields[4].value = tostring(jobId)
        data.embeds[1].fields[5].value = "`" .. joinScript .. "`"

        -- ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¼Ð¾Ð´ÐµÐ»Ð¸
        local names = {}
        local generations = {}
        local mutationCounts = {}
        local rarityCounts = {}

        for entry in models:gmatch("[^,]+") do
            local trimmed = entry:match("^%s*(.-)%s*$")
            local displayName, generation, mutation, rarity = trimmed:match("(.+)%s*Generation:%s*([^%s]+)%s*Mutation:%s*([^%s]+)%s*Rarity:%s*(.+)")
            if displayName then
                table.insert(names, displayName)
                table.insert(generations, generation or "Unknown")
                mutationCounts[mutation] = (mutationCounts[mutation] or 0) + 1
                rarityCounts[rarity] = (rarityCounts[rarity] or 0) + 1
            end
        end

        -- Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¼ÑƒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ñ€ÐµÐ´ÐºÐ¾ÑÑ‚Ð¸
        local formattedMutations = {}
        for mutation, count in pairs(mutationCounts) do
            table.insert(formattedMutations, count > 1 and mutation .. " x" .. count or mutation)
        end
        local formattedRarities = {}
        for rarity, count in pairs(rarityCounts) do
            table.insert(formattedRarities, count > 1 and rarity .. " x" .. count or rarity)
        end

        -- Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾Ð»Ñ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾, ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ
        if #names > 0 then
            table.insert(data.embeds[1].fields, 1, {name = "ðŸª™ Name:", value = table.concat(names, ", "), inline = true})
        end
        if #generations > 0 then
            table.insert(data.embeds[1].fields, 2, {name = "ðŸ“ˆ Generation:", value = table.concat(generations, ", "), inline = true})
        end

        -- Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐž: ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ description Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ Ð¾ Ð½Ð°Ð¹Ð´ÐµÐ½Ð½Ñ‹Ñ… Ð¿ÐµÑ‚Ð°Ñ…
        if #names > 0 then
            data.embeds[1].description = "Found " .. #names .. " pet(s): " .. table.concat(names, ", ")
        else
            data.embeds[1].description = "Pet notification details"
        end

        return data
    end
]]
